{% extends "base.html" %}

{% block title %}
Edit Get Started | Admin
{% endblock %}

{% block content %}
<main class="admin-page">

  <header class="admin-header">
    <h1>Edit Get Started Plan</h1>
    <p>Create a new plan.</p>
  </header>

  <form method="post" class="admin-form admin-form-wide">

    <!-- Core metadata -->
    <fieldset class="form-section">

      <!-- Function implementation -->
      <div class="form-group">
        <label for="function_impl">
          Function implementation
        </label>

        <select
          id="function_impl"
          name="function_impl"
          required
        >
          <option value="">
            — Select a function implementation —
          </option>

          {% for fn in fns %}
          <option value="{{ fn.id }}" {% if plan.function_impl.real_name == fn.real_name and plan.api_level == fn.api_level %} selected {% endif %}>
              {{ fn.real_name }}
              . {{ fn.api_level }}
            </option>
          {% endfor %}
        </select>
      </div>

      <!-- Goal -->
      <div class="form-group">
        <label for="goal">
          Goal
        </label>

        <textarea
          id="goal"
          name="goal"
          rows="3"
          required
          >{{ plan.goal }}</textarea>
      </div>

      <!-- Priority -->
      <div class="form-group">
        <label for="priority">
          Priority
        </label>

        <input
          id="priority"
          name="priority"
          type="number"
          value="{{ plan.priority }}"
          placeholder="Optional (lower = earlier)"
        >
      </div>

    </fieldset>

    <!-- Actions -->
    <div class="admin-actions admin-actions-sticky">
      <button type="submit" class="btn-primary">
        Save changes
      </button>

      <a href="{{ url_for('admin.show_get_started') }}" class="btn-link">
        Cancel
      </a>
    </div>

  </form>


    <section class="admin-danger-zone">
      <h2>Danger zone</h2>
      <p>
        Deleting this Get Started plan will permanently remove it.
        This action cannot be undone.
      </p>
    
      <form
        method="post"
        action="{{ url_for('admin.delete_get_started', 
                            plan_id=plan.id) }}"
        onsubmit="return confirm(
          'Delete plan? This cannot be undone.'
        );"
      >
        <button type="submit" class="btn-danger">
          Delete plan
        </button>
      </form>
    </section>

  <br>

</main>
{% endblock %}




