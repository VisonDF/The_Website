{% extends "base.html" %}

{% block title %}
Add function implementation | Admin
{% endblock %}

{% block content %}
<main class="admin-page">

  <header class="admin-header">
    <h1>Add function implementation</h1>
    <p>Create a new concrete function implementation.</p>
  </header>

  <form method="post" class="admin-form">

    <!-- Real name -->
    <div class="form-group">
      <label>Function name</label>
      <input
        type="text"
        name="real_name"
        placeholder="e.g. group_by_hash"
        required
      >
    </div>

    <!-- API level -->
    <div class="form-group">
      <label>API level</label>
      <select name="api_level" required>
        <option value="">— Select API level —</option>
        <option value="high">High-level API</option>
        <option value="low">Low-level API</option>
      </select>
    </div>

    <!-- Function family -->
    <div class="form-group">
      <label>Function family</label>
      <select name="family_id" required>
        <option value="">— Select family —</option>
        {% for fam in families %}
          <option value="{{ fam.id }}">
            {{ fam.display_name }}
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- Default dataset -->
    <div class="form-group">
      <label>Default dataset (for docs)</label>
      <select name="default_dataset_id">
        <option value="">— None —</option>
        {% for ds in datasets %}
          <option value="{{ ds.id }}">
            {{ ds.name }} ({{ ds.version }})
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- Signature -->
    <div class="form-group">
      <label>Signature (HTML)</label>
      <textarea
        name="signature_html"
        rows="4"
        placeholder="<code>group_by(col)</code>"
      ></textarea>
    </div>

    <!-- Description -->
    <div class="form-group">
      <label>Description (HTML)</label>
      <textarea
        name="description_html"
        rows="10"
        placeholder="<p>Describe what this implementation does...</p>"
      ></textarea>
    </div>

    <!-- Actions -->
    <div class="admin-actions">
      <button type="submit">Create function</button>

      <a href="{{ url_for('admin.dashboard') }}">
        Cancel
      </a>
    </div>

  </form>

</main>
{% endblock %}


