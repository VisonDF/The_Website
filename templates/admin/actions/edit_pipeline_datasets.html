{% extends "base.html" %}

{% block title %}
Edit pipeline datasets â€” {{ pipeline.title }} | VisonDF
{% endblock %}


{% block content %}

<section class="container">


<h1>Edit datasets for pipeline</h1>

<h2>{{ pipeline.title }}</h2>

<form method="post" class="admin-form admin-form-wide">

  <!-- =========================
       Dataset selection
       ========================= -->
  <fieldset class="form-section">
    <legend>Datasets used by this pipeline</legend>

    <p class="form-hint">
      Select the datasets referenced by this pipeline narrative.
      These will be available for download on the pipeline page.
    </p>

    <div class="checkbox-list">

      {% for ds in all_datasets %}
        <label class="checkbox-item">
          <input
            type="checkbox"
            name="dataset_ids"
            value="{{ ds.id }}"
            {% if ds.id in pipeline.datasets | map(attribute="id") | list %}
              checked
            {% endif %}
          >
          <span class="checkbox-label">
            <strong>{{ ds.name }}</strong>
            <span class="checkbox-meta">
              {{ ds.version }}
            </span>
          </span>
        </label>
      {% endfor %}

      {% if not all_datasets %}
        <p><em>No datasets available.</em></p>
      {% endif %}

    </div>
  </fieldset>

  <!-- =========================
       Actions
       ========================= -->
  <div class="admin-actions admin-actions-sticky">
    <button type="submit" class="btn-primary">
      Save datasets
    </button>

    <a
      href="{{ url_for('admin.show_pipeline') }}"
      class="btn-link"
    >
      Back to pipeline
    </a>
  </div>

</form>
</section>
{% endblock %}



