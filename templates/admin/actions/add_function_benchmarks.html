{% extends "base.html" %}

{% block title %}
Add benchmark | Admin
{% endblock %}

{% block content %}
<main class="admin-page">

  <header class="admin-header">
    <h1>Add benchmark</h1>
  </header>

<form method="post" class="admin-form admin-form-wide">

  <!-- =========================
       Benchmark identity
       ========================= -->
  <fieldset class="form-section">
    <legend>Benchmark metadata</legend>

    <div class="form-group">
      <label>Related function implementation</label>
    
      <select
        name="function_impl_id"
        required
      >
        <option value="">
          — Select a function implementation —
        </option>
    
        {% for fn in functions %}
          <option value="{{ fn.id }}">
            {{ fn.real_name }}
            · {{ fn.family.display_name }}
            · {{ fn.api_level }}
          </option>
        {% endfor %}
      </select>
    
      <small class="form-hint">
        Only function implementations without an existing benchmark are listed.
      </small>
    </div>      <small class="form-hint">
        Must match an existing function implementation name.
      </small>
    </div>

    <div class="form-group">
      <label>Benchmark title</label>
      <input
        type="text"
        name="title"
        placeholder="e.g. TPC-H style group_by workload"
        required
      >
    </div>
  </fieldset>

  <!-- =========================
       Benchmark narrative
       ========================= -->
  <fieldset class="form-section">
    <legend>Benchmark description</legend>

    <div class="form-group">
      <label>
        Description (HTML)
        <button
          type="button"
          class="preview-toggle"
          onclick="togglePreview()"
        >
          Preview
        </button>
      </label>

      <div class="editor-preview-wrapper">

        <textarea
          id="description-editor"
          name="description_html"
          class="code-textarea code-textarea-large"
          placeholder="<p>Describe the workload, hardware, metrics, and observations...</p>"
          oninput="updatePreview()"
          required
        ></textarea>

        <div
          id="description-preview"
          class="html-preview"
          hidden
        ></div>

      </div>

      <small class="form-hint">
        This HTML is rendered verbatim on the documentation page.
      </small>
    </div>
  </fieldset>

  <!-- =========================
       Actions
       ========================= -->
  <div class="admin-actions admin-actions-sticky">
    <button type="submit" class="btn-primary">
      Create benchmark
    </button>

    <a href="{{ url_for('admin.show_benchs') }}" class="btn-link">
      Cancel
    </a>
  </div>

</form>


</main>
{% endblock %}



